//-----------------------------------------------------------------------------

[
  SCREEN       = 960
  SCREEN_DIV   = 4
  SCREEN_BLOCK = SCREEN/SCREEN_DIV
]

//-----------------------------------------------------------------------------

var RTCLOK=0x14, SAVMSC=0x58, RND=0xD20A

var screen[2]=0x80

//-----------------------------------------------------------------------------

inline wait {
  c- a+RTCLOK { a?RTCLOK } !=
}

inline draw {
  y=SCREEN_BLOCK {
    a=RND n-?{ a=0x46 } else { a=0x47 }
    (screen),y=a y--
  }!=
  a=screen c- a+SCREEN_BLOCK screen=a c+?{ y=screen+1 y++ screen+1=y }
}

//-----------------------------------------------------------------------------

main {
  {
    y=SAVMSC y-- screen=y screen+1=a=SAVMSC+1
    x=SCREEN_DIV { draw x-- }!=
    a=100 wait
  } always
}

//-----------------------------------------------------------------------------